# design
> db 설계와 페이지 디자인 및 퍼블리싱, 페이지에 들어가는 기능 명세까지 기록한 문서입니다. 

- html : 부트스트랩 3 테마를 수정해서 사용했습니다.

## 🎯 ERD
<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/erd.png?raw=true">

#### 앨범 테이블
> 아티스트id와 앨범태그id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/album.png?raw=true">

- 앨범ID : pk
- 아티스트ID : fk
- 앨범태그ID : fk
- 앨범 이름 : 앨범의 이름이 들어간다.
- 앨범 구분 : 앨범, 싱글, ep, 정규 중 하나가 들어간다.
- 앨범 설명 : 앨범 소개글이 들어간다.
- 앨범 발매일 : 앨범 발매일이 들어간다 (yyyy-mm-dd)
- 앨범 발매가 : 앨범 발매가가 들어간다.
- 앨범 커버이미지 : 커버 이미지의 주소가 들어간다.
- 앨범 판매량 : 앨범이 어플리케이션에서 판매될때마다 1씩 증가한 값이 들어간다.
- 조회량 : 앨범 상세 페이지에 접근할때마다 1씩 증가한 값이 들어간다.

#### 음원 테이블
> 앨범id와 아티스트id, 음원장르id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/soundtrack.png?raw=true">

- 음원ID : pk
- 앨범ID : fk
- 음원장르ID : fk
- 아티스트ID : fk
- 음원이름 : 음원 이름이 들어간다.
- 음원설명 : 음원 소개글이 들어간다.
- 트랙번호 : 이 음원이 앨범의 몇번째 트랙인지 들어간다.
- 음원 유튜브 : 음원의 유튜브 주소가 들어간다.
- 음원 파일 : 음원 파일의 주소가 들어간다.
- 타이틀곡 : 타이틀 곡 여부를 나타낸다. 기본값 'N'


#### 아티스트 테이블

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/artist.png?raw=true">

- 아티스트ID : pk
- 아티스트 이름 : 아티스트 이름이 들어간다.
- 아티스트 이미지 : 아티스트 사진의 주소가 들어간다.
- 아티스트 설명 : 아티스트를 나타내는 소개글이 들어간다.
- 데뷔일 : 아티스트 데뷔일이 들어간다 (yyyy-mm-dd)
- 팬덤 명 : 팬덤명이 들어간다.
- 소속사 : 소속사가 들어간다. 기본값 '없음'
- 활동장르 : 주 활동 장르가 들어간다. 
- sns주소 : 아티스트의 인스타 주소가 들어간다.

#### 리뷰 테이블
> 앨범id와 사용자id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/review.png?raw=true">

- 리뷰ID : pk
- 사용자ID : fk
- 앨범ID : fk
- 평점 : 앨범의 평가 점수가 들어간다. 0~100 사이의 정수가 들어간다.
- 후기 : 앨범의 후기가 들어간다. 


#### 좋아요 테이블
> 앨범id와 사용자id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/like.png?raw=true">

#### 장바구니 테이블
> 앨범id와 사용자id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/cart.png?raw=true">


#### 앨범 태그 테이블
> 앨범의 태그를 저장한다. 예) 빌보드200, 한국 명반 100 등 <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/album_tag.png?raw=true">

#### 음원 장르 테이블
> 음원의 장르를 저장한다. 예) 발라드, 랩, 알앤비, 재즈 등 <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/soundtrack_tag.png?raw=true">

#### 아티스트의 주 활동 장르 테이블
> 아티스트ID 와 음원장르id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/artist_to_soundtrack_tag.png?raw=true">

#### 사용자의 선호장르 테이블
> 사용자id와 음원장르id를 외래키로 가진다. <br>

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/user_to_soundtrack_tag.png?raw=true">

- 추천시스템 데이터로 사용된다.



## 👀 Page & 기능요구사항

#### home&homeLogin (/)
> 로그인 시 login home page 랜더링

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/home.gif?raw=true">

1. 랜덤 앨범 가져오기
  - 빌보드 200, 한국 대중음악 명반 100 등 랜덤 태그를 가져온다.
  - 그 태그에 속해있는 랜덤 앨범 1개를 가져온다.
2. 현재 장바구니에 있는 목록 가져오기
   - 앨범 리스트로 가져온다.
3. 장바구니 목록 개수 및 좋아요 목록 개수 가져오기
   - 계속 필요하기 때문에 최초 1회만 sql을 호출하고 사용할 수 있는 방법을 생각해 볼 필요 있음
   - 근데 이러면 동시성 문제는 안생기나?
4. 로그인 기능
   - email : email 형식 검증
   - password : 대소문자, 숫자, 특수문자 2조합 이상 검증
5. **bestSellAlbums** : 판매량 많은 순 10개 내림차순 정렬 데이터를 가져온다.
6. **highViewAlubms** : 조회수 많은 순 10개 내림차순 정렬 데이터를 가져온다.
7. **manyLikeAlumbs** : 좋아요 많은 순 10개 내림차순 정렬 데이터를 가져온다.
8. **highRatingAlumbs** : 후기 평점 높은 순 10개 내림차순 정렬 데이터를 가져온다.


#### sighIn
> 회원가입 폼
- 이름 폼
- 이메일 폼
- 비밀번호 폼
- 비밀번호 확인 폼

#### nameAndEmailVal 
> 이름과 이메일 검증 폼
- pop-up


#### forgetPasSet
> 비밀번호 재설정 폼
- pop-up 패스워드 수정 후 홈으로 리 다이렉트



#### myPage 
>내 정보 페이지
- 이름 
- 이메일 
- 프로필 사진
- edit 버튼(접근시 비밀번호 확인 검증)
- 구매한 상품 보기
- 웹 머니 조회 및 충전 버튼
- 판매자 페이지로 갈 수 있는 버튼
- 내가 좋아하는 아티스트 및 음악 장르를 수정 할 수 있는 페이지로 이동하는 버튼


#### verify password 
>비밀번호 확인 폼
- 비밀번호 확인 시 user edit으로 리다이렉트


#### user edit 
>회원 정보 수정 폼
- 내 정보 페이지와 같지만 수정 폼이 나온다.


#### cash
> 웹 머니 충전 프로세스 진행 페이지
- 카카오 or 네이버 페이 api 사용?

#### albumAll
> 모든 앨범 리스트 페이지

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/all_album.gif?raw=true">

1. tagAlbums : 각 태그의 모든 앨범을 가져온다.
2. bestSellAlbums : 판매량 많은 순 20개 내림차순 정렬 데이터를 가져온다.
3. highViewAlubms : 조회수 많은 순 20개 내림차순 정렬 데이터를 가져온다.
4. manyLikeAlumbs : 좋아요 많은 순 20개 내림차순 정렬 데이터를 가져온다.
5. highRatingAlumbs : 후기 평점 높은 순 20개 내림차순 정렬 데이터를 가져온다.

#### item-detail
> 선택한 앨범 상세정보 페이지

<img src="https://github.com/gudals-kim/web_vulnerability/blob/delevlop/docs/v1/img/album_detail.gif?raw=true">

1. 현재 앨범 정보를 가져온다.
   - 앨범 테이블의 모든 속성 
   - 좋아요 수, 리뷰 점수
2. 현재 앨범의 리뷰 정보를 가져온다.
   - 리뷰 점수 및 리뷰 내용
   - 리뷰 작성자 이름 정보
3. 현재 앨범의 모든 수록곡을 가져온다.
   - 음원 테이블의 모든 속성
4. 현재 앨범의 아티스트를 가져온다.
   - 아티스트 테이블의 모든 속성
5. 아티스트가 발매한 앨범을 가져온다.
   - 현재 앨범 제외
   - 최대 7개 
6. bestSellAlbums : 판매량 많은 순 10개 내림차순 정렬 데이터를 가져온다.
7. highViewAlubms : 조회수 많은 순 10개 내림차순 정렬 데이터를 가져온다.
8. manyLikeAlumbs : 좋아요 많은 순 10개 내림차순 정렬 데이터를 가져온다.
9. highRatingAlumbs : 후기 평점 높은 순 10개 내림차순 정렬 데이터를 가져온다.
#### cart
> 장바구니 페이지

#### forSeller
> 판매 통계 페이지

#### likeAlbums
> 좋아요한 앨범을 보여주는 페이지

#### forPurchase
> 구매 페이지

#### searchAlbums
> 검색한 앨범을 보여주는 페이지

