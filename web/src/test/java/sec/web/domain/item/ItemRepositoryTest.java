package sec.web.domain.item;

import com.zaxxer.hikari.HikariDataSource;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import sec.web.domain.member.MemberRepository;

import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;
import static sec.web.dbconnection.ConnectionConst.*;

class ItemRepositoryTest {
    ItemRepository itemRepository;

    @BeforeEach
    void beforeEach(){
        HikariDataSource dataSource = new HikariDataSource();
        dataSource.setJdbcUrl(URL);
        dataSource.setUsername(USERNAME);
        dataSource.setPassword(PASSWORD);

        itemRepository = new ItemRepository(dataSource);
    }
    @Test
    void CRUD_TEST(){
        Item itemTest = new Item(3L, "itemTest1", 5000, 5, "item description 테스트 중입니다.");
        //save
        itemRepository.save(itemTest);
        //find
        Item findItem = itemRepository.find(1L);
        assertThat(findItem.getDescription()).isEqualTo(itemTest.getDescription());
    }

}