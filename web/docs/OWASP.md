# OWASP top 10

## OWASP란?
OWASP(The Open Web Application Security Project)는 오픈소스 웹 애플리케이션 보안 프로젝트
<br>
<br>
비영리단체인 OWASP는 상업적인 목적이나 이윤적인 압박이 없기 때문에 애플리케이션 보안에 대해 공정하고 실질적이며 효율적인 정보를 제공하고 있습니다.
<br>
<br>
주로 웹에 관한 정보노출, 악성 파일 및 스크립트, 보안 취약점을 연구하며, 웹 애플리케이션의 취약점 중에서 빈도가 많이 발생하고 보안상 영향을 크게 줄 수 있는 것들 순위를 매겨 발표합니다.

## 2013 Top 10

### 1.Injection

#### 개요
- Injection 취약점은 SQL, OS, LDAP 등에 해당되며 신뢰할 수 없는 데이터를 명령이나 질의문의 일부분으로서 보내질 때 발생한다.
#### 공격방법
- Injection 취약점은 SQL, OS, LDAP 등에 해당되며 신뢰할 수 없는 데이터를 명령이나 질의문의 일부분으로서 보내질 때 발생한다.
#### 대응방안
- 익히 알려진 보안 솔루션을 사용하여 대응하거나 홈페이지 개발 시에 소스 코드 단에서 시큐어 코딩으로 대응하는 방법이 있다.

---

### 2.Broken Authentication and Session Management (인증 및 세션 관리 취약점)

#### 개요
- 인증과 세션 관리와 관련된 기능이 정확하게 구현되어 있지 않아서 발생한다.
#### 공격방법
- 공격자가 패스워드, 키 또는 세션 토큰을 해킹하여 다른 사용자 ID로 가장 할 수 있는 취약점이다
#### 대응방안
- 소스 코드상에서 공격자가 직접열람, 추가, 변경 할 수 없는 서버 단 세션변수를 사용해야하며 세션 또한 일정 시간이 지나면 자동 파기하고 중복된 로그인을 방지 하여야 한다.

---

### 3.Cross-Site Scripting (XSS) (크로스 사이트 스크립팅)

#### 개요
- XSS 취약점은 신뢰할 수 없는 데이터를 적절한 검증이나 제한 없이 웹 브라우저로 보낼 때 발생한다. XSS 공격은 웹사이트의 사용자 계정을 획득하고 개인정보를 도용하는 등의 침해사고를 일으킨다.
#### 공격방법
- 공격자가 피해자의 브라우저에 스크립트를 실행하여 사용자 세션탈취, 웹 사이트 변조, 악의적인 사이트로 이동할 수 있게 한다.
- 순서
    ```javascript
    1. XSS 유발 가능한 스크립트를 게시하여 취약점 존재 여부를 확인
    
    <script>alert(“XSS 취약점 존재”)</script>
    
    2. 접속자로부터 전송된 쿠키저장을 위한 서버 구축
    
    3. 실제 공격에 쓰이는 스크립트를 이용하여 게시판에 글을 게시
    
    4. 홈페이지 접속자가 게시판의 글을 읽는 순간 쿠키 정보를 공격자 서버에 전송
    
    5. 공격자는 획득한 쿠키 정보 (인증, 세션정보 등 )를 이용하여 다른 사용자의 계정으로 로그인 성공
    ```

#### 대응방안
- 웹 방화벽에서 해당하는 특수문자, 특수구문을 필터링 하는 대응방법이 있으며 소스코드 상에서 XSS공격에서 주로 사용되는 문자들을 리스트로 지정하여 해당 문자가 존재할 시 URL 인코딩으로 치환하거나 해당 문자 삽입을 방지 한다.

---

### 4.Insecure Direct Object References (취약점 직접 객체 참조)

#### 개요
- 직접 객체 참조는 개발자가 파일, 디렉토리, DB 키와 같은 내부 구현 객체를 참조하는 것을 노출 시킬 때 발생한다.
- 접근통제를 통한 확인이나 다른 보호 수단이 없다면, 공격자는 노출된 참조를 조작하여 허가 받지 않은 데이터에 접근할 수 있는 취약점이다.

#### 대응방안
- 웹 방화벽에서 상위 혹은 하위 디렉토리로 이동하는 특수문자를 필터링 하는 대응방안과 파일을 다운로드하는 소스코드에서는 직접적으로 파일의 경로 및 파일명을 파라미터로 받는 것을 피해야 한다.

---

### 5.Security Misconfiguration (보안 설정 오류)

#### 개요
- 훌륭한 보안이란 애플리케이션, 프레임워크, 애플리케이션 서버, 웹서버, 데이터베이스 서버 및 플랫폼에 대해 보안 설정이 정의되고 적용 되어 있다.

#### 대응방안
- 기본으로 제공되는 값은 종종 안전하지 않기 때문에 보안 설정은 정의, 구현 및 유지되어야 한다. 또한 소프트웨어는 최신 상태로 유지하여야 한다.

---

### 6.Sensitive Data Exposure (민감 데이터 노출)

#### 개요
- 많은 웹 애플리케이션들이 신용카드, 개인 식별 정보 및 인증 정보와 같은 중요한 데이터를 제대로 보호하지않는다.
#### 공격방법
- 공격자는 신용카드 사기, 신분 도용 또는 다른 범죄를 수행 하는 등 약하게 보호된 데이터를 훔치거나 변경 할 수 있다.
#### 대응방안
- 중요 데이터가 저장 또는 전송 중이거나 브라우저와 교환하는 경우 특별히 주의하여야 하며, 암호화와 같은 보호조치를 취해야 한다

---

### 7.Missing Function Level Access Control (기능 수준의 접근 통제 누락)

#### 개요
- 대부분의 웹 애플리케이션은 UI에 해당 기능을 보이게 하기 전에 기능 수준의 접근 권한을 확인하며 이는 각 기능에 접근하는 서버에 동일한 접근통제 검사를 수행하기 때문에 요청에 대해 적절히 확인하지 않을 경우 공격자는 적절한 권한 없이 기능에 접근하기 위한 요청을 위조할 수 있는 취약점이다.

#### 대응방안
- 관리자 페이지 등에 대하여 유저 권한을 클라이언트가 아닌 서버에서 판단해야 하며 역할에 기반한 별도의 인증절차를 요구하도록 만들어야 하고 보여주지 않은 페이지들은 URL만 숨길 것이 아니라 권한이 없는 유저들은 접근 불가하게 코딩해야 합니다.

---

### 8.Cross-Site Request Forgery (CSRF) (크로스 사이트 요청 변조)

#### 개요
- CSRF 취약점은 로그온 된 피해자의 취약한 웹 애플리케이션에 피해자의 세션 쿠키와 기타 다른 인증 정보를 자동으로 포함하여 위조된 HTTP 요청을 강제로 보내도록 하는 것이다.
- 악성 스크립트가 삽입된 게시글을 읽을 경우 해당 사용자 권한의 요청 (Request)을 변조하여 사용자가 모르는 사이 공격자가 원하는 임의의 작업(변조, 생성, 삭제 등)을 수행한다.
#### 공격방법
- 공격자는 사용자가 인증한 세션이 특정 동작을 수행하여도 계속 유지되어 정상적인 요청과 비정상적인 요청을 구분하지 못하는 점을 악용하여 공격을 수행한다.
#### 대응방안
- 이는 검증 되지 않거나 신뢰할 수 없는 데이터를 정상적인 데이터로 위조할 수 있는 취약점으로 XSS공격을 기반으로 하기 때문에 XSS취약점을 방지하면 어느 정도 예방되는 효과를 얻을 수 있다.

---

### 9.Using Components with Known Vulnerabilities (알려진 취약점이 있는 컴포넌트 사용)

#### 개요
- 컴포넌트, 라이브러리, 프레임워크 및 다른 소프트웨어 모듈은 대부분 항상 전체 권한으로 실행되어 이러한 취약한 컴포넌트를 악용하여 공격하는 경우 심각한 데이터 손실이 발생하거나 서버가 장악된다
#### 대응방안
- 알려진 취약점이 있는 컴포넌트를 사용하는 애플리케이션은 애플리케이션 방어 체계를 손상하거나, 공격 가능한 범위를 활성화 하는 등의 영향을 미치므로 사용중인 컴포넌트, 프로그램에 대하여 지속적인 업데이트를 하며 사용하지 않는 기능들을 최대한 비활성화 하는 것이 좋다.

---

### 10.Unvalidated Redirects and Forwards (검증되지 않은 리 다이렉트 및 포워드)

#### 개요
- 웹 애플리케이션은 종종 사용자들을 다른 페이지로 리 다이렉트 하거나 포워드 하고, 대상 페이지를 결정하기 위해 신뢰할 수 없는 데이터를 사용한다
#### 공격방법
- 적절한 검정절차가 없으면 공격자는 피해자를 피싱 또는 악성코드 사이트로 리 다이렉트 하거나 승인되지 않은 페이지에 접근하도록 전달 할 수 있다
#### 대응방안
-  리 다이렉트 페이지를 신뢰 된 페이지로 제한 하거나 리 다이렉트 되는 URL이 악성인지 아닌지 판별하는 타 서비스를 이용하여 검증 후 사용자를 리 다이렉트 시켜야 한다.

---

### 3.XSS 와 8.CSRF 차이점

XSS는 공격자가 작성한 스크립트를 클라이언트 측에서 실행되게 하여 악의적인 사이트로 이동, 세션탈취, 웹사이트 변조 등이 일어나게 합니다. <br>
이러한 크로스 사이트 스크립트의 종류에는 Stored XSS 와 Reflected XSS 가 있습니다.<br>
<br>
Stored XSS는 가장 일반 적으로 사용되는 크로스 사이트 스크립트의 공격유형으로 게시판과 자료실에 사용자가 글을 저장할 수 있는 부분에 정상적인 평문이 아닌 스크립트 코드를 입력하는 방법입니다.
<br>
이 경우 다른 사용자가 게시판을 열람하는 순간 공격자가 입력해둔 악성 스크립트가 실행되어 사용자의 쿠키 정보가 유출되거나 악성 스크립트가 기획한 공격에 당하게 됩니다.
<br>
Reflected XSS는 악성코드를 포함한 URL을 메일이나 게시판 등에 노출시켜 사용자가 접속하게 유도하는 것입니다.
<br>
<br>
CSRF(크로스 사이트 요청 변조)는 특정 웹사이트에 대해 사용자가 인지하지 못하는 상황에서 사용자의 의도와는 무관하게 공격자가 의도한 수정, 삭제, 등록 등을 요청하게 하는 공격입니다. <br>
즉 사용자의 세션을 이용해 공격자의 의도를 충족하는 것이라고 할 수 있습니다.<br>
<br>
이러한 XSS와 CSRF의 차이점은 크로스 사이트 스크립트 공격은 악성 스크립트가 클라이언트에서 실행되는 반면에 사이트 간 요청 위조 공격은 사용자가 악성 스크립트가 포함된 페이지를 서버에 요청한다는 점에서 차이가 있습니다.